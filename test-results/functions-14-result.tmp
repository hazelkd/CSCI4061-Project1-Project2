(TEST 14) cmd_print_output_2
COMMENTS:

program: ./test_cmd cmd_print_output_2
Failure messages:
- FAILURE(13): Valgrind detected errors
- FAILURE: Output Mismatch at lines marked

--- Side by Side Differences ---
- Expect output in: test-results/raw/functions-14-expect.tmp
- Actual output in: test-results/raw/functions-14-actual.tmp
- Differing lines have a character like '|' '>' or '<' in the middle
==== EXPECT ====                                                         ==== ACTUAL ====                                                      
{                                                                        {
    // Tests whether cmd_print_output() correctly                            // Tests whether cmd_print_output() correctly
    // captures and prints a completed command's output.                     // captures and prints a completed command's output.
    char *argv[] = {                                                         char *argv[] = {
      "grep",                                                                  "grep",
      "-i",                                                                    "-i",
      "the ",                                                                  "the ",
      "test_data/gettysburg.txt",                                              "test_data/gettysburg.txt",
      NULL                                                                     NULL
    };                                                                       };
    cmd_t *cmd = cmd_new(argv);                                              cmd_t *cmd = cmd_new(argv);
    cmd_start(cmd);                // start running                          cmd_start(cmd);                // start running
    cmd_update_state(cmd,DOBLOCK); // wait for completion                    cmd_update_state(cmd,DOBLOCK); // wait for completion
                                   // should see an alert                                                   // should see an alert
    cmd_print_output(cmd);                                                   cmd_print_output(cmd);
    cmd_free(cmd);                                                           cmd_free(cmd);
}                                                                        }
                                                                       > max size: 1024
                                                                       > cur pos: 433 
                                                                       > bytes read: 433
                                                                       > max size: 1024
                                                                       > cur pos: 433 
                                                                       > bytes read: 0
-- we can not hallow -- this ground. The brave men, living and dead,     -- we can not hallow -- this ground. The brave men, living and dead,
add or detract. The world will little note, nor long remember what we    add or detract. The world will little note, nor long remember what we
living, rather, to be dedicated here to the unfinished work which they   living, rather, to be dedicated here to the unfinished work which they
to be here dedicated to the great task remaining before us -- that       to be here dedicated to the great task remaining before us -- that
which they gave the last full measure of devotion -- that we here        which they gave the last full measure of devotion -- that we here
government of the people, by the people, for the people, shall not       government of the people, by the people, for the people, shall not
perish from the earth.                                                   perish from the earth.
                                                                       > 0x4aa4b00
ALERTS:                                                                  ALERTS:
@!!! grep[%0]: EXIT(0)                                                   @!!! grep[%0]: EXIT(0)
                                                                       (
--- Line Differences ---
ACTUAL:  18) max size: 1024
ACTUAL:  19) cur pos: 433 
ACTUAL:  20) bytes read: 433
ACTUAL:  21) max size: 1024
ACTUAL:  22) cur pos: 433 
ACTUAL:  23) bytes read: 0
ACTUAL:  31) 0x4aa4b00

--- Valgrind Log from: test-results/raw/functions-14-valgrd.tmp ---
==1360213== Memcheck, a memory error detector
==1360213== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.
==1360213== Using Valgrind-3.15.0 and LibVEX; rerun with -h for copyright info
==1360213== Command: ./test_cmd cmd_print_output_2
==1360213== Parent PID: 1360212
==1360213== 
==1360213== Syscall param write(buf) points to uninitialised byte(s)
==1360213==    at 0x49C01E7: write (write.c:26)
==1360213==    by 0x10B8CF: cmd_print_output (cmd.c:176)
==1360213==    by 0x10A531: main (test_cmd.c:334)
==1360213==  Address 0x4aa4cb2 is 434 bytes inside a block of size 1,025 alloc'd
==1360213==    at 0x483B7F3: malloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==1360213==    by 0x10B6C0: read_all (cmd.c:120)
==1360213==    by 0x10B82E: cmd_fetch_output (cmd.c:158)
==1360213==    by 0x10B63F: cmd_update_state (cmd.c:110)
==1360213==    by 0x10A522: main (test_cmd.c:332)
==1360213==  Uninitialised value was created by a heap allocation
==1360213==    at 0x483B7F3: malloc (in /usr/lib/x86_64-linux-gnu/valgrind/vgpreload_memcheck-amd64-linux.so)
==1360213==    by 0x10B6C0: read_all (cmd.c:120)
==1360213==    by 0x10B82E: cmd_fetch_output (cmd.c:158)
==1360213==    by 0x10B63F: cmd_update_state (cmd.c:110)
==1360213==    by 0x10A522: main (test_cmd.c:332)
==1360213== 
==1360213== 
==1360213== HEAP SUMMARY:
==1360213==     in use at exit: 0 bytes in 0 blocks
==1360213==   total heap usage: 6 allocs, 6 frees, 3,415 bytes allocated
==1360213== 
==1360213== All heap blocks were freed -- no leaks are possible
==1360213== 
==1360213== For lists of detected and suppressed errors, rerun with: -s
==1360213== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 0 from 0)

